<div class="row m-0">
    <div class="col-12 mt-2 raised">  
        <h3 class="text-center">{{patient?.name}}</h3>
    </div>
</div>
<div class="row">
    
  <div class="col-12 col-md-6 mt-1">
    <div class="raised p-3">
      <h4 class="text-center">Add Session</h4>
      <form [formGroup]="sessionForm" (ngSubmit)="saveSession()" novalidate>
          <mat-form-field class="col-6" >
                <mat-icon matPrefix fontSet="fa" fontIcon="fa-calendar"></mat-icon>
                <input type="date" matInput name="session.date" [ngModel]="session.date | date:'yyyy-MM-dd'" (ngModelChange)="dateChanged($event)" formControlName="date"/>
                <mat-error *ngIf="sessionForm.controls.date.invalid && sessionForm.controls.date.touched">Date Required</mat-error>
                
          </mat-form-field>

          <mat-form-field class="col-12" >
              <mat-icon matPrefix fontSet="fa" fontIcon="fa-calendar-plus-o"></mat-icon>
              <input matInput placeholder="Treatments" [(ngModel)]="session.treatments" formControlName="treatments">
              <mat-error *ngIf="sessionForm.controls.treatments.invalid && sessionForm.controls.treatments.touched">Treatments invalid</mat-error>
          </mat-form-field>
          <mat-form-field class="col-12" >
              <mat-icon matPrefix fontSet="fa" fontIcon="fa-sticky-note"></mat-icon>
              <input matInput placeholder="Comments" [(ngModel)]="session.comments" formControlName="comments">
          </mat-form-field>
          <mat-form-field class="col-12" >
              <mat-icon matPrefix fontSet="fa" fontIcon="fa-money"></mat-icon>
              <input matInput placeholder="Session Fee" [(ngModel)]="session.sessionFee" formControlName="sessionFee">
              <mat-error *ngIf="sessionForm.controls.sessionFee.invalid && sessionForm.controls.sessionFee.touched">Session fee invalid</mat-error>
          </mat-form-field>
          
        <div class="row mx-3 d-flex justify-content-between">
            <a class="btn btn-secondary" routerLink="/dashboard/sessions/list"><i class="fa fa-undo"></i>Back to list</a>
            <button class="btn btn-primary" [ngClass]="{'disabled': sessionForm.invalid }" type="submit" ><i class="fa fa-send"></i>Save</button>
        </div> 
      </form>

    </div>
  </div>


  <div class="col-12 col-md-6 mt-1">
    <div class="raised p-3">
        <h4 class="text-center">{{patient?.name}} Session List </h4>
        <table class="table">
        <thead>
            <tr>
            <th>Date</th>
            <th>Session#</th>
            <th>Treatments</th>
            <th>SessionFee</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let session of sessions">
            <td>{{session?.date | date:'dd-MM-yyyy'}}</td>
            <td>{{session?.sessionNumber}}</td>
            <td>{{session?.treatments}}</td>
            <td>{{session?.sessionFee}}</td>
            </tr>
            <tr *ngFor="let i of arr(10 - sessions?.length)" >
                <td colspan="4">
                    &nbsp;
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
            <td colspan="3">
                <div aria-label="Page navigation example">
                <ul class="pagination justify-content-end">
                    <li class="page-item" [ngClass]="{'disabled': sessionPage?.first}" ><a class="page-link" [routerLink] (click)="getPatientSessions(0)" > First </a></li>
                    <li class="page-item" [ngClass]="{'disabled': sessionPage?.number == 0}" ><a class="page-link" [routerLink] (click)="getPatientSessions(sessionPage?.number-1)" > Previous </a></li>

                    <li class="page-item"><a class="page-link" > {{sessionPage?.number+1}} / {{sessionPage?.totalPages}} </a></li>

                    <li class="page-item" [ngClass]="{'disabled': sessionPage?.last}"><a class="page-link" [routerLink] (click)="getPatientSessions(sessionPage?.number+1)"> Next </a></li>
                    <li class="page-item" [ngClass]="{'disabled': sessionPage?.last}"><a class="page-link" [routerLink] (click)="getPatientSessions(sessionPage?.totalPages-1)"> Last </a></li>
                </ul>
                </div>
            </td>
            </tr>
        </tfoot>
        </table>
    </div>
    </div>
</div>
